<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java로 Open API 요청하기</title>
</head>
<body th:object="${weatherMap}">
    <!-- body안에서 weatherMap 객체를 뜯어서 * 붙여서 필드를 쉽게 꺼내 쓸 수 있게 하겠다 -->
    <h1>Java로 Open API 요청하기</h1>
    <!-- model에 담긴 것 꺼내서 활용할 수 있다 -->


    <label for="region">지역 선택</label>
	<select name="region" id="region">
		<option>서울</option>
		<option>경기</option>
		<option>인천</option>
		<option>제주</option>
		<option>세종</option>
		<option>광주</option>
		<option>대구</option>
		<option>대전</option>
		<option>부산</option>
		<option>울산</option>
		<option>강원</option>
		<option>경북</option>
		<option>경남</option>
		<option>전북</option>
		<option>전남</option>
		<option>충북</option>
		<option>충남</option>
	</select>

	<hr>

	<div>
		<h2 id="regionName" th:text="${param.regionName} ?: _">서울</h2>

		<div class="current-weather">
			<h1 th:text="|*{T1H}℃|">12℃</h1>
			<p th:text="*{SKY}">흐림</p>
			<p th:text="|습도(%) : *{REH}|">습도</p>
			<p th:text="|강수 형태 : *{PTY}|">강수형태</p>
			<p th:text="|강수 확률(%) : *{RN1}|">강수량</p>
		</div>
	</div>


	<script th:inline="javascript">

		const region = document.querySelector("#region");
		region.addEventListener("change", e => { //select 태그값이 바뀔 떄마다 요청 다시 보내기
			location.href = "/ex2?regionName=" + e.target.value;
		})


		const regionName = /*[[${param.regionName}]]*/ '지역명';

		document.querySelectorAll("#region > option").forEach(item => {
			if (item.value == regionName) item.selected = true; //select태그의 이전 내용을 선택해두기

		})
	</script>





</body>
</html>